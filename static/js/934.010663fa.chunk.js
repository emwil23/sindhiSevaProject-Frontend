"use strict";(self.webpackChunksindhi_front=self.webpackChunksindhi_front||[]).push([[934],{33934:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var a=n(1413),l=n(4942),r=n(29439),i=n(77154),o=n(82464),s=n(6137),u=n(82864),c=n(47528),d=n(83099),f=n(34571),m=n(82862),h=n(49389),v=n(87309),b=n(60467),p=n(72791),x=n(59434),g=n(4149),y=n(37762),S=function(e,t,n){var a=function(e,t){var n,a="object"!=typeof e?JSON.parse(e):e,l="",r="",i=(0,y.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;""!=r&&(r+=","),r+=o.label}}catch(m){i.e(m)}finally{i.f()}l+=r+"\r\n";for(var s=0;s<a.length;s++){var u,c="",d=(0,y.Z)(t);try{for(d.s();!(u=d.n()).done;){var f=u.value;""!=c&&(c+=","),c+=a[s][f.value]?'"'.concat(a[s][f.value],'"'):'"-"'}}catch(m){d.e(m)}finally{d.f()}l+=c+"\r\n"}return l}(t,e),l=n+".csv"||0,r=new Blob([a],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");if(void 0!==i.download){var o=URL.createObjectURL(r);i.setAttribute("href",o),i.setAttribute("download",l),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},j=n(74165),Z=n(15861),I=n(36755),N=n(83734),w=n(51277),k=n(85965),A=n(51797),C=n(13248),O=n(80184),E=function(e){var t=(0,p.useState)([]),n=(0,r.Z)(t,2),a=n[0],i=n[1],o=(0,p.useState)(!0),s=(0,r.Z)(o,2),u=s[0],c=s[1],d=e.items,f="admin"===e.userRole,m=function(){var e=(0,Z.Z)((0,j.Z)().mark((function e(t,n){var l;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=a,e.next=3,(0,g.A_)("/members",{filter:{where:{uid:t}}}).then((function(e){l.push({data:e[0],relationName:n}),i(l)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){var e;(e=null===d||void 0===d?void 0:d.members)&&0!==e.length?e.forEach((function(e){m(e.relationId,e.relationName).then((function(){(null===d||void 0===d?void 0:d.members.length)===a.length&&c(!1)}))})):c(!1)}),[]);var h=function(){var t=(0,Z.Z)((0,j.Z)().mark((function t(n,a){return(0,j.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.Ll)("/members",null===d||void 0===d?void 0:d.id,(0,l.Z)({},n,a)).then((function(t){(0,A.Y)("Records Successfully Updated"),e.refreshTable(!0)})).catch((function(e){return(0,A.Y)("Some Problem Occured","Please try again later.")}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return u?(0,O.jsx)(k.Z,{size:"large"}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(w.default,{layout:"vertical",children:[d.profilePicture?(0,O.jsx)(w.default.Item,{label:"Profile Picture",contentStyle:{color:"grey"},children:(0,O.jsx)(I.Z,{width:100,src:"".concat(d.profilePicture),className:"rounded"})}):null,(0,O.jsx)(w.default.Item,{label:"First Name",contentStyle:{color:"grey"},children:d.firstName}),(0,O.jsx)(w.default.Item,{label:"Last Name",contentStyle:{color:"grey"},children:d.lastName}),(0,O.jsx)(w.default.Item,{label:"Qualification",contentStyle:{color:"grey"},children:d.qualification}),(0,O.jsx)(w.default.Item,{label:"Profession",contentStyle:{color:"grey"},children:d.profession}),(0,O.jsx)(w.default.Item,{label:"mobile",contentStyle:{color:"grey"},children:d.mobile}),(0,O.jsx)(w.default.Item,{label:"Marital Status",contentStyle:{color:"grey"},children:d.maritalStatus}),(0,O.jsx)(w.default.Item,{label:"Gender",contentStyle:{color:"grey"},children:d.gender}),(0,O.jsx)(w.default.Item,{label:"Email",contentStyle:{color:"grey"},children:d.email}),(0,O.jsx)(w.default.Item,{label:"Date Of Birth",contentStyle:{color:"grey"},children:new Date(d.dob).toDateString()}),(0,O.jsx)(w.default.Item,{label:"Blood",contentStyle:{color:"grey"},children:d.blood}),f?(0,O.jsx)(w.default.Item,{label:"Status",contentStyle:{color:"grey"},children:(0,O.jsx)(N.Z,{defaultValue:d.status,onChange:function(e){return h("status",e)},children:C.Aq.map((function(e,t){return(0,O.jsx)(N.Z.Option,{value:e.value,children:e.label},t)}))})}):(0,O.jsx)(w.default.Item,{label:"active",contentStyle:{color:"grey"},children:d.active}),(0,O.jsx)(w.default.Item,{label:"Address",contentStyle:{color:"grey"},span:2,children:d.address})]}),null!==d&&void 0!==d&&d.members?(0,O.jsx)(w.default,{title:"Family",children:a.map((function(e,t){return null!==e&&void 0!==e&&e.data?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(w.default.Item,{label:"Name",children:"".concat(e.data.firstName," ").concat(e.data.lastName)},t),(0,O.jsx)(w.default.Item,{label:"Relation",children:"".concat(e.relationName)},e.data.uid),null!==d&&void 0!==d&&d.anniversary&&["Wife","Husband"].includes(e.relationName)?(0,O.jsx)(w.default.Item,{label:"Anniversary",children:new Date(d.anniversary).toDateString()},e.data.id):(0,O.jsx)(O.Fragment,{})]}):null}))}):null]})},P=n(54502),D=["gender","qualification","martialStatus","maritalStatus","status"],B=(0,g.A_)("/members/count").then((function(e){var t=e.count;B=t})),F=function(e){var t=[],n={};if(e&&Object.entries(e).map((function(e){var n=(0,r.Z)(e,2),a=n[0],i=n[1];return Array.isArray(i)?i.map((function(e){return D.includes(a)?t.push((0,l.Z)({},a,e)):t.push((0,l.Z)({},a,{like:e,options:"i"}))})):i?t.push((0,l.Z)({},a,i)):""})),Object.assign(n,{or:t}),0!==n.or.length)return n},G=function(){var e=(0,p.useState)(),t=(0,r.Z)(e,2),n=t[0],l=t[1],y=(0,p.useState)(!1),j=(0,r.Z)(y,2),Z=j[0],I=j[1],N=(0,p.useState)({current:1,pageSize:10}),w=(0,r.Z)(N,2),k=w[0],A=w[1],C=(0,p.useState)([]),D=(0,r.Z)(C,2),G=D[0],R=D[1],q=(0,p.useState)([]),L=(0,r.Z)(q,2),M=L[0],z=L[1],U=(0,p.useState)(),H=(0,r.Z)(U,2),T=H[0],_=H[1],W=(0,p.useState)(!1),J=(0,r.Z)(W,2),K=J[0],Q=J[1],Y=(0,x.v9)(P.gJ);(0,p.useEffect)((function(){if(!T)return X({pagination:k});X({pagination:k,where:{firstName:{like:T,options:"i"},lastName:{like:T,options:"i"},gender:{like:T,options:"i"},email:{like:T,options:"i"},profession:{like:T,options:"i"},qualification:{like:T,options:"i"},maritalStatus:{like:T,options:"i"},status:{like:T,options:"i"},address:{like:T,options:"i"}}})}),[T]),(0,p.useEffect)((function(){K&&(X({pagination:k}),Q(!1))}),[K]);var V=[{label:"First Name",value:"firstName"},{label:"Last Name",value:"lastName"},{label:"Date of Birth",value:"dob"},{label:"Gender",value:"gender"},{label:"Email",value:"email"},{label:"Profession",value:"profession"},{label:"Qualification",value:"qualification"},{label:"Marital Status",value:"maritalStatus"},{label:"Address",value:"address"},{label:"Blood Group",value:"blood"},{label:"Mobile No.",value:"mobile"}],X=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={limit:null===(e=r.pagination)||void 0===e?void 0:e.pageSize,order:"".concat((null===r||void 0===r?void 0:r.sortField)||"dateCreated"," ").concat("descend"===(null===r||void 0===r?void 0:r.sortOrder)?"DESC":"ascend"===(null===r||void 0===r?void 0:r.sortOrder)?"ASC":"DESC"),skip:(null===(t=r.pagination)||void 0===t?void 0:t.pageSize)*((null===(n=r.pagination)||void 0===n?void 0:n.current)-1),where:F(r.where)};I(!0),(0,g.A_)("/members",{filter:i}).then((function(e){l(e),I(!1),A((0,a.Z)((0,a.Z)({},r.pagination),{},{total:void 0===i.where?B:e.length}))}))},$=[{title:"First Name",dataIndex:"firstName",sorter:!0},{title:"Last Name",dataIndex:"lastName",sorter:!0},{title:"Gender",dataIndex:"gender"},{title:"Email",dataIndex:"email"},{title:"Profession",dataIndex:"profession"},{title:"Status",dataIndex:"status",render:function(e){return["InActive","Blocked"].includes(e)?(0,O.jsx)(c.Z,{color:"red",children:e.toUpperCase()}):(0,O.jsx)(c.Z,{color:"green",children:e.toUpperCase()})}},{title:"Qualification",dataIndex:"qualification"},{title:"maritalStatus",dataIndex:"maritalStatus"},{title:"address",dataIndex:"address",ellipsis:!0},{title:"Action",key:"action",fixed:"right",width:100,render:function(e,t){return(0,O.jsxs)(d.Z,{size:"middle",children:[(0,O.jsx)(i.Z,{className:"fs-5",onClick:function(){return ee(t.firstName,t,Y)}}),"admin"===Y?(0,O.jsx)(f.Z,{title:"Are you sure to delete?",onConfirm:function(){return function(e){(0,g.Jl)("/members",null===e||void 0===e?void 0:e.id).then((function(e){window.location.reload()}))}(t)},placement:"topRight",okText:"Yes",cancelText:"No",children:(0,O.jsx)(o.Z,{className:"fs-5"})}):null]})}}],ee=function(e,t,n){m.Z.info({title:"".concat(e," Information"),icon:(0,O.jsx)(s.Z,{style:{color:"blue-4"}}),content:(0,O.jsx)(E,{items:t,userRole:n,refreshTable:Q}),okText:"CLOSE",width:1e3})},te={selectedRowKeys:G,onChange:function(e,t){R(e),z(t)}},ne=G.length<11;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:"mx-5 d-flex mb-2",children:[(0,O.jsx)(h.Z.Search,{placeholder:"Search fields here...",allowClear:!0,onSearch:function(e){_(e)},className:"mt-2"}),(0,O.jsx)("div",{className:"text-end my-2 mx-1",children:(0,O.jsxs)(v.Z,{disabled:!ne||0===G.length,onClick:function(){ne&&S(V,M,"Records")},children:[(0,O.jsx)(u.Z,{}),"Export"]})})]}),(0,O.jsx)(b.Z,{columns:$,rowKey:function(e){return e.id},rowSelection:te,dataSource:n,pagination:k,loading:Z,scroll:{x:2e3},onChange:function(e,t,n){X({sortField:n.field,sortOrder:n.order,pagination:e,where:t})}})]})},R=function(){return(0,O.jsx)(G,{})}},13248:function(e,t,n){n.d(t,{Aq:function(){return f},C9:function(){return i},Eg:function(){return l},K3:function(){return r},P3:function(){return a},d8:function(){return s},ll:function(){return u},ud:function(){return c},yu:function(){return d},zM:function(){return o}});var a=["Male","Female","Others"],l=["Doctor","Engineer","Others"],r=["A+","A-","AB+","AB-","B+","B-","O+","O-"],i=["10th","12th","Graduate","PostGraduate","PHD"],o=["Married","Unmarried","Divorced","Widow","Widower"],s=["Father","Mother","Husband","Wife","Sister","Brother"],u=[{label:"Active",value:"Active"},{label:"Inactive",value:"Inactive"}],c=[{label:"Doctor",value:"Doctor"},{label:"Engineer",value:"Engineer"},{label:"Other",value:"Other"}],d=[{label:"10th",value:"10th"},{label:"12th",value:"12th"},{label:"Graduate",value:"Graduate"},{label:"PostGraduate",value:"PostGraduate"},{label:"PHD",value:"PHD"}],f=[{label:"Active",value:"Active"},{label:"InActive",value:"InActive"},{label:"Blocked",value:"Blocked"}]}}]);
//# sourceMappingURL=934.010663fa.chunk.js.map
(self.webpackChunksindhi_front=self.webpackChunksindhi_front||[]).push([[844],{39031:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var a=n(1413),r=n(4942),l=n(29439),i=n(11730),o=n(77154),c=n(82464),u=n(6137),s=n(82864),d=n(80177),f=n(87309),m=n(83734),v=n(47528),h=n(83099),b=n(70478),g=n(47585),p=n(72791),x=n(59434),y=n(4149),S=n(37762),j=function(e,t,n){var a=function(e,t){var n,a="object"!=typeof e?JSON.parse(e):e,r="",l="",i=(0,S.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;""!=l&&(l+=","),l+=o.label}}catch(m){i.e(m)}finally{i.f()}r+=l+"\r\n";for(var c=0;c<a.length;c++){var u,s="",d=(0,S.Z)(t);try{for(d.s();!(u=d.n()).done;){var f=u.value;""!=s&&(s+=","),s+=a[c][f.value]?'"'.concat(a[c][f.value],'"'):'"-"'}}catch(m){d.e(m)}finally{d.f()}r+=s+"\r\n"}return r}(t,e),r=n+".csv"||0,l=new Blob([a],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");if(void 0!==i.download){var o=URL.createObjectURL(l);i.setAttribute("href",o),i.setAttribute("download",r),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},Z=n(74165),w=n(15861),I=n(51277),N=n(85965),C=n(80184),A=function(e){var t=(0,p.useState)([]),n=(0,l.Z)(t,2),a=n[0],r=n[1],i=(0,p.useState)(!0),o=(0,l.Z)(i,2),c=o[0],u=o[1],s=e.items,d=function(){var e=(0,w.Z)((0,Z.Z)().mark((function e(t,n){var l;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=a,e.next=3,(0,y.A_)("/members",{filter:{where:{uid:t}}}).then((function(e){l.push({data:e[0],relationName:n}),r(l)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){var e;(e=null===s||void 0===s?void 0:s.members)?e.forEach((function(e){d(e.relationId,e.relationName).then((function(){(null===s||void 0===s?void 0:s.members.length)===a.length&&u(!1)}))})):u(!1)}),[]),c?(0,C.jsx)(N.Z,{size:"large"}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(I.default,{layout:"vertical",children:[(0,C.jsx)(I.default.Item,{label:"First Name",contentStyle:{color:"grey"},children:s.firstName}),(0,C.jsx)(I.default.Item,{label:"Last Name",contentStyle:{color:"grey"},children:s.lastName}),(0,C.jsx)(I.default.Item,{label:"Qualification",contentStyle:{color:"grey"},children:s.qualification}),(0,C.jsx)(I.default.Item,{label:"Profession",contentStyle:{color:"grey"},children:s.profession}),(0,C.jsx)(I.default.Item,{label:"mobile",contentStyle:{color:"grey"},children:s.mobile}),(0,C.jsx)(I.default.Item,{label:"Marital Status",contentStyle:{color:"grey"},children:s.maritalStatus}),(0,C.jsx)(I.default.Item,{label:"Gender",contentStyle:{color:"grey"},children:s.gender}),(0,C.jsx)(I.default.Item,{label:"Email",contentStyle:{color:"grey"},children:s.email}),(0,C.jsx)(I.default.Item,{label:"Date Of Birth",contentStyle:{color:"grey"},children:new Date(s.dob).toDateString()}),(0,C.jsx)(I.default.Item,{label:"Blood",contentStyle:{color:"grey"},children:s.blood}),(0,C.jsx)(I.default.Item,{label:"active",contentStyle:{color:"grey"},children:s.active}),(0,C.jsx)(I.default.Item,{label:"Address",contentStyle:{color:"grey"},span:2,children:s.address})]}),null!==s&&void 0!==s&&s.members?(0,C.jsx)(I.default,{title:"Family",children:a.map((function(e,t){return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(I.default.Item,{label:"Name",children:"".concat(e.data.firstName," ").concat(e.data.lastName)},t),(0,C.jsx)(I.default.Item,{label:"Relation",children:"".concat(e.relationName)},e.data.uid),null!==s&&void 0!==s&&s.anniversary&&["Wife","Husband"].includes(e.relationName)?(0,C.jsx)(I.default.Item,{label:"Anniversary",children:new Date(s.anniversary).toDateString()},e.data.id):(0,C.jsx)(C.Fragment,{})]})}))}):null]})},D=n(13248),k=n(54502),F=["gender","qualification","martialStatus","maritalStatus","active"],O=(0,y.A_)("/members/count").then((function(e){var t=e.count;O=t})),L=function(e){var t=[],n={};if(e&&Object.entries(e).map((function(e){var n=(0,l.Z)(e,2),a=n[0],i=n[1];return Array.isArray(i)?i.map((function(e){return F.includes(a)?t.push((0,r.Z)({},a,e)):t.push((0,r.Z)({},a,{like:e,options:"i"}))})):i?t.push((0,r.Z)({},a,i)):""})),Object.assign(n,{and:t}),0!==n.and.length)return n},E=[{label:"Married",value:"Married"},{label:"Unmarried",value:"Unmarried"},{label:"Divorced",value:"Divorced"},{label:"Widow",value:"Widow"},{label:"Widower",value:"Widower"}],M=function(){var e=(0,p.useState)(),t=(0,l.Z)(e,2),n=t[0],r=t[1],S=(0,p.useState)(!1),Z=(0,l.Z)(S,2),w=Z[0],I=Z[1],N=(0,p.useState)({current:1,pageSize:10}),F=(0,l.Z)(N,2),M=F[0],B=F[1],G=(0,p.useState)([]),P=(0,l.Z)(G,2),z=P[0],R=P[1],U=(0,p.useState)([]),W=(0,l.Z)(U,2),q=W[0],K=W[1],_=(0,x.v9)(k.gJ);console.log(_);var H=[{label:"First Name",value:"firstName"},{label:"Last Name",value:"lastName"},{label:"Date of Birth",value:"dob"},{label:"Gender",value:"gender"},{label:"Email",value:"email"},{label:"Profession",value:"profession"},{label:"Qualification",value:"qualification"},{label:"Marital Status",value:"maritalStatus"},{label:"Address",value:"address"},{label:"Blood Group",value:"blood"},{label:"Mobile No.",value:"mobile"}],J=function(){var e,t,n,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={limit:null===(e=l.pagination)||void 0===e?void 0:e.pageSize,order:"".concat((null===l||void 0===l?void 0:l.sortField)||"dateCreated"," ").concat("descend"===(null===l||void 0===l?void 0:l.sortOrder)?"DESC":"ascend"===(null===l||void 0===l?void 0:l.sortOrder)?"ASC":"DESC"),skip:(null===(t=l.pagination)||void 0===t?void 0:t.pageSize)*((null===(n=l.pagination)||void 0===n?void 0:n.current)-1),where:L(l.where)};I(!0),(0,y.A_)("/members",{filter:i}).then((function(e){r(e),I(!1),B((0,a.Z)((0,a.Z)({},l.pagination),{},{total:void 0===i.where?O:e.length}))}))};(0,p.useEffect)((function(){J({pagination:M})}),[]);var Q=function(e,t){return e(""),t()},T=function(e){return{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys,a=e.confirm,r=e.clearFilters;return(0,C.jsxs)("div",{style:{padding:8},children:[(0,C.jsx)(d.Z,{placeholder:"Search Name",value:n[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},style:{marginBottom:8,display:"block"}}),(0,C.jsx)(f.Z,{onClick:function(){return a()},size:"small",style:{width:90},className:"me-1",children:"Search"}),(0,C.jsx)(f.Z,{onClick:function(){return r&&Q(t,a)},size:"small",style:{width:90},danger:!0,children:"Reset"})]})},onFilter:function(t,n){return n[e].toLocaleLowerCase().includes(t.toLocaleLowerCase())},filterIcon:function(e){return(0,C.jsx)(i.Z,{style:{color:e?"#1890ff":void 0}})}}},V=function(e,t,n){return{filterDropdown:function(e){var a=e.setSelectedKeys,r=e.selectedKeys,l=e.confirm,i=e.clearFilters;return(0,C.jsxs)("div",{style:{padding:8},children:[(0,C.jsx)("div",{className:"mb-1",children:"Select ".concat(t)}),(0,C.jsx)(m.Z,{placeholder:"Select ".concat(t),value:r,onChange:function(e){a(e?[e]:[""]),l()},className:"w-100",children:n.map((function(e,t){return(0,C.jsx)(m.Z.Option,{value:e.value,children:e.label},t)}))}),(0,C.jsx)(f.Z,{onClick:function(){return i&&Q(a,l)},size:"small",className:"mt-1 w-100",danger:!0,children:"Reset"})]})},onFilter:function(t,n){return n[e].toLocaleLowerCase().includes(t.toLocaleLowerCase())}}},X=[(0,a.Z)({title:"First Name",dataIndex:"firstName",sorter:!0},T("firstName")),(0,a.Z)({title:"Last Name",dataIndex:"lastName",sorter:!0},T("lastName")),(0,a.Z)({title:"Gender",dataIndex:"gender"},V("gender","Gender",[{label:"Male",value:"Male"},{label:"Female",value:"Female"},{label:"Others",value:"Others"}])),(0,a.Z)({title:"Email",dataIndex:"email"},T("email")),(0,a.Z)({title:"Profession",dataIndex:"profession"},V("profession","Profession",D.ud)),(0,a.Z)((0,a.Z)({title:"Status",dataIndex:"active"},V("active","Status",D.Aq)),{},{render:function(e){return e.match("Inactive")?(0,C.jsx)(v.Z,{color:"red",children:e.toUpperCase()}):(0,C.jsx)(v.Z,{color:"green",children:e.toUpperCase()})}}),(0,a.Z)({title:"Qualification",dataIndex:"qualification"},V("qualification","Qualification",D.yu)),(0,a.Z)({title:"maritalStatus",dataIndex:"maritalStatus"},V("maritalStatus","MaritalStatus",E)),(0,a.Z)((0,a.Z)({title:"address",dataIndex:"address"},T("address")),{},{ellipsis:!0}),{title:"Action",key:"action",fixed:"right",width:100,render:function(e,t){return(0,C.jsxs)(h.Z,{size:"middle",children:[(0,C.jsx)(o.Z,{className:"fs-5",onClick:function(){return Y(t.firstName,t)}}),(0,C.jsx)(c.Z,{hidden:"admin"!==_,className:"fs-5",onClick:function(){!function(e){(0,y.Jl)("/members",null===e||void 0===e?void 0:e.id).then((function(e){window.location.reload()}))}(t)}})]})}}],Y=function(e,t){b.Z.info({title:"".concat(e," Information"),icon:(0,C.jsx)(u.Z,{style:{color:"blue-4"}}),content:(0,C.jsx)(A,{items:t}),okText:"CLOSE",width:1e3})},$={selectedRowKeys:z,onChange:function(e,t){R(e),K(t)}},ee=z.length<11;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"text-end my-2 mx-1",children:(0,C.jsxs)(f.Z,{disabled:!ee||0===z.length,onClick:function(){ee&&j(H,q,"Records")},children:[(0,C.jsx)(s.Z,{}),"Export"]})}),(0,C.jsx)(g.Z,{columns:X,rowKey:function(e){return e.id},rowSelection:$,dataSource:n,pagination:M,loading:w,scroll:{x:2e3},onChange:function(e,t,n){J({sortField:n.field,sortOrder:n.order,pagination:e,where:t})}})]})},B=function(){return(0,C.jsx)(M,{})}},13248:function(e,t,n){"use strict";n.d(t,{Aq:function(){return f},C9:function(){return i},Eg:function(){return r},K3:function(){return l},P3:function(){return a},d8:function(){return c},ll:function(){return u},ud:function(){return s},yu:function(){return d},zM:function(){return o}});var a=["Male","Female","Others"],r=["Doctor","Engineer","Others"],l=["A+","A-","AB+","AB-","B+","B-","O+","O-"],i=["10th","12th","Graduate","PostGraduate","PHD"],o=["Married","Unmarried","Divorced","Widow","Widower"],c=["Father","Mother","Husband","Wife","Sister","Brother"],u=[{label:"Active",value:"Active"},{label:"Inactive",value:"Inactive"}],s=[{label:"Doctor",value:"Doctor"},{label:"Engineer",value:"Engineer"},{label:"Other",value:"Other"}],d=[{label:"10th",value:"10th"},{label:"12th",value:"12th"},{label:"Graduate",value:"Graduate"},{label:"PostGraduate",value:"PostGraduate"},{label:"PHD",value:"PHD"}],f=[{label:"Active",value:"Active"},{label:"Inactive",value:"Inactive"}]},4149:function(e,t,n){"use strict";n.d(t,{Jl:function(){return s},A_:function(){return o},Ll:function(){return u},j0:function(){return c}});var a=n(74569),r=n.n(a)().create({baseURL:"https://sindhi-seva-app.herokuapp.com"}),l=n(32808),i=n.n(l),o=function(e,t){return r.get(e,{params:t,paramsSerializer:function(e){return i().stringify(e)}}).then((function(e){return e.data}))},c=function(e,t){return r.post(e,t).then((function(e){return e.data}))},u=function(e,t,n){return r.patch("".concat(e,"/").concat(t),n).then((function(e){return e.data}))},s=function(e,t){return r.delete("".concat(e,"/").concat(t)).then((function(e){return e.data}))}},24654:function(){}}]);
//# sourceMappingURL=844.6212b1a1.chunk.js.map